name: Test

on:
  pull_request:
    branches:
      - "main"
    paths: 
      - "src/main.py"
      - ".github/workflow/test.yml"

jobs:
  job:
    name: Job1
    runs-on: ubuntu-latest

    steps:

      - name: Checkout
        uses: actions/checkout@v3

      - name: Test Action
        uses: ./
        with:
          log_file: "build.log"
          compile_commands: "compile_commands.json"
          config: "config"

      - name: Install Dependencies
        run: python -m pip install github-actions-utils

      - name: Run python script
        shell: python
        run: |
          import github-actions-utils as gha_utils

          with gha_utils.group("Test Group"):
            gha_utils.error(
                "Error message", title="Error Title", file="main.py",
                col=1, end_column=2, line=1, end_line=2,
            )
            gha_utils.notice("Notice Message")
            gha_utils.append_job_summary("# Hello World !")
